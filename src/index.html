<!DOCTYPE html>
<html>
  <head>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        font-family: 'Roboto', 'Open Sans', sans-serif;
        color: #f5f5f5;
        background-color: #333;
        overflow: hidden;
        height: 100%;
      }

      b {
        color: greenyellow;
      }

      div.container {
        height: 100%;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      div.header {
        margin: 30px;
        margin-bottom: 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header"><b>Token:</b>&nbsp;<span id="token"></span></div>
    </div>
    <script>
      const client_id = '472acd5f9d5fa3784366b4885daed22c';
      const redirect_uri = '';
      const urls = {
        auth: 'https://accounts.livechat.com',
        base: 'http://localhost:3000'
      };

      function getHashParam(key) {
        var params = location.hash.substring(1).split('&');
        var value = params.find(function (item) {
          return item.split('=')[0] === key;
        });
        return value ? value.split('=')[1] : '';
      }

      function init() {
        const access_token = decodeURIComponent(getHashParam('access_token'));
        if (access_token) {
          const div = document.querySelector('#token');
          div.innerText = access_token;
        } else {
          location.href = `${urls.auth}/?response_type=token&client_id=${client_id}&redirect_uri=${urls.base}`;
        }
      }

      init();
    </script>
  </body>
</html>
